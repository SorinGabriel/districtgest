var multi=function(){var e=function(e,t){var n,a,r,d=e.options[t.target.getAttribute("multi-index")];d.disabled||(d.selected=!d.selected,n="change",a=e,(r=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),a.dispatchEvent(r))},t=function(e,t){if(e.wrapper.selected.innerHTML="",e.wrapper.non_selected.innerHTML="",t.non_selected_header&&t.selected_header){var n=document.createElement("div"),a=document.createElement("div");n.className=a.className="header",n.innerText=t.non_selected_header,a.innerText=t.selected_header,e.wrapper.non_selected.appendChild(n),e.wrapper.selected.appendChild(a)}if(e.wrapper.search)var r=e.wrapper.search.value;for(var d=0;d<e.options.length;d++){var l=e.options[d],i=l.value,c=l.textContent||l.innerText,s=document.createElement("a");if(s.tabIndex=0,s.className="item",s.innerHTML=c,s.setAttribute("role","button"),s.setAttribute("data-value",i),s.setAttribute("multi-index",d),l.disabled&&(s.className+=" disabled"),l.selected){s.className+=" selected";var o=s.cloneNode(!0);e.wrapper.selected.appendChild(o)}(!r||r&&c.toLowerCase().indexOf(r.toLowerCase())>-1)&&e.wrapper.non_selected.appendChild(s)}};return function(n,a){if((a=void 0!==a?a:{}).enable_search=void 0===a.enable_search||a.enable_search,a.search_placeholder=void 0!==a.search_placeholder?a.search_placeholder:"Search...",a.non_selected_header=void 0!==a.non_selected_header?a.non_selected_header:null,a.selected_header=void 0!==a.selected_header?a.selected_header:null,null==n.dataset.multijs&&"SELECT"==n.nodeName&&n.multiple){n.style.display="none",n.setAttribute("data-multijs",!0);var r=document.createElement("div");if(r.className="multi-wrapper",a.enable_search){var d=document.createElement("input");d.className="search-input",d.type="text",d.setAttribute("placeholder",a.search_placeholder),d.addEventListener("input",function(){t(n,a)}),r.appendChild(d),r.search=d}var l=document.createElement("div");l.className="non-selected-wrapper";var i=document.createElement("div");i.className="selected-wrapper",r.addEventListener("click",function(t){t.target.getAttribute("multi-index")&&e(n,t)}),r.addEventListener("keypress",function(t){var a=32===t.keyCode||13===t.keyCode;t.target.getAttribute("multi-index")&&a&&(t.preventDefault(),e(n,t))}),r.appendChild(l),r.appendChild(i),r.non_selected=l,r.selected=i,n.wrapper=r,n.parentNode.insertBefore(r,n.nextSibling),t(n,a),n.addEventListener("change",function(){t(n,a)})}}}();"undefined"!=typeof jQuery&&function(e){e.fn.multi=function(t){return t=void 0!==t?t:{},this.each(function(){var n=e(this);multi(n.get(0),t)})}}(jQuery);